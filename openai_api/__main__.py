from openai import OpenAI
import os

api_key = os.getenv("OPENAI_API_KEY")
client = OpenAI(api_key=api_key)


def ask_question(question, model="gpt-4"):
    try:
        response = client.chat.completions.create(
            model=model,
            messages=[
                {"role": "system", "content": "You are a helpful financial assistant. Return what type of form this is with response. 1 - type of form, 2 - level of confidence"},
                {"role": "user", "content": question}
            ],
            temperature=0.7
        )
        return response.choices[0].message.content.strip()
    except Exception as e:
        return f"Error: {e}"


if __name__ == "__main__":
    print("üîç Ask anything (type 'exit' to quit)")
    answer = ask_question("Form 1040\nDepartment of the Treasury-Internal Revenue Service U.S. Individual Income Tax Return\n2024\nOMB No. 1545-0074\nIRS Use Only-Do not write or staple in this space.\nFor the year Jan. 1-Dec. 31, 2024, or other tax year beginning\n2024, ending ,20 ,\nSee separate instructions.\nYour first name and middle initial\nLast name\nYour social security number\nIf joint return, spouse's first name and middle initial\nLast name\nSpouse's social security number\nHome address (number and street). If you have a P.O. box, see instructions.\nApt. no.\nCity, town, or post office. If you have a foreign address, also complete spaces below.\nState\nZIP code\nForeign country name\nForeign province/state/county\nForeign postal code\nPresidential Election Campaign Check here if you, or your spouse if filing jointly, want $3 to go to this fund. Checking a box below will not change your tax or refund. :unselected: You :unselected: Spouse :unselected: Head of household (HOH)\nFiling Status :unselected: Check only one box. Single :unselected: Married filing jointly (even if only one had income) :unselected: Married filing separately (MFS) :unselected: Qualifying surviving spouse (QSS) If you checked the MFS box, enter the name of your spouse. If you checked the HOH or QSS box, enter the child's name if the qualifying person is a child but not your dependent: :unselected: If treating a nonresident alien or dual-status alien spouse as a U.S. resident for the entire tax year, check the box and enter their name (see instructions and attach statement if required):\nDigital Assets\nAt any time during 2024, did you: (a) receive (as a reward, award, or payment for property or services); or (b) sell, exchange, or otherwise dispose of a digital asset (or a financial interest in a digital asset)? (See instructions.) :unselected: Yes :unselected: No\nSomeone can claim: :unselected: You as a dependent :unselected: Your spouse as a dependent\nStandard Deduction :unselected: Spouse itemizes on a separate return or you were a dual-status alien\nAge/Blindness You: :unselected: Spouse: Were born before January 2, 1960 :unselected: Are blind :unselected: Was born before January 2, 1960 :unselected: Is blind\nDependents (see instructions):\nIf more\n(1) First name\n(2) Social security Last name number\n(3) Relationship to you\n(4) Check the box if qualifies for (see instructions): Child tax credit Credit for other dependents\nthan four :unselected: :unselected:\ndependents,\nsee instructions :unselected: :unselected:\nand check :unselected: :unselected:\nhere . . :unselected: :unselected: :unselected:\nIncome\n1a\nTotal amount from Form(s) W-2, box 1 (see instructions) . . .\n. . . . .\n. . . . .\n1a\nAttach Form(s)\nb Household employee wages not reported on Form(s) W-2 . .\n. . . . .\n. . . . .\n1b\nW-2 here. Also attach Forms\nW-2G and\nc\nTip income not reported on line 1a (see instructions) . . . .\n. . . . .\n. . . . .\n1c\nd\nMedicaid waiver payments not reported on Form(s) W-2 (see instructions) . .\n. . . . .\n1d\n1099-R if tax\ne\nTaxable dependent care benefits from Form 2441, line 26 . .\n. . . . .\n. . . . .\n1e\nwas withheld.\nf\nEmployer-provided adoption benefits from Form 8839, line 29 .\n. . . . .\n. . . . .\n1f\nIf you did not\nget a Form\ng\nWages from Form 8919, line 6 . . . . . . . . . .\n. . . . .\n. . . . .\n1g\nW-2, see\nh\nOther earned income (see instructions) . . . . . . . .\n. . . . .\n. . . . .\n1h\ninstructions.\ni\nNontaxable combat pay election (see instructions) . . . .\n1i . .\nz\nAdd lines 1a through 1h .\n. . . . . . . . . . .\n. . . . .\n. . . . .\n1z\nAttach Sch. B\n2a\nTax-exempt interest . .\n2a b Taxable interest\n. . . . .\n2b\nif required.\n3a\nQualified dividends . . .\n3a b Ordinary dividends\n. . . .\n3b\n4a IRA distributions . . . .\n4a b Taxable amount\n. . . . .\n4b\nStandard Deduction for-\n5a Pensions and annuities . .\n5a b Taxable amount .\n. . . . .\n5b\n¬∑ Single or\nMarried filing\n6a Social security benefits .\n6a b Taxable amount\n. . . . .\n6b\nseparately,\nc If you elect to use the lump-sum election method, check here (see instructions) . :unselected: . . . .\n$14,600\n¬∑ Married filing\n7\nCapital gain or (loss). Attach Schedule D if required. If not required, check here . :unselected: . . . .\n7\njointly or\nQualifying\n8\nAdditional income from Schedule 1, line 10 . . . . . . .\n. . . . .\n. . . . .\n8\nsurviving spouse, $29,200\n. Head of\n9\nAdd lines 1z, 2b, 3b, 4b, 5b, 6b, 7, and 8. This is your total income\n. . . .\n. . . . .\n9\n10\nAdjustments to income from Schedule 1, line 26 . . . . .\n. . . . .\n. . . . .\n10\nhousehold,\n11\nSubtract line 10 from line 9. This is your adjusted gross income\n. . . . .\n. . . . .\n11\n$21,900 . If you checked\n12\nStandard deduction or itemized deductions (from Schedule A)\n. . . . .\n. . . . .\n12\nany box under\nStandard\n13\nQualified business income deduction from Form 8995 or Form 8995-A . . .\n. . . . .\n13\nDeduction,\n14\nAdd lines 12 and 13 . . .\n. . . . . . . . . . .\n. . . . .\n. . . . .\n14\nsee instructions.\n15 Subtract line 14 from line 11. If zero or less, enter -0 -. This is your taxable income\n. . . . .\n15\nFor Disclosure, Privacy Act, and Paperwork Reduction Act Notice, see separate instructions.\nCat. No. 11320B Form 1040 (2024)\nForm 1040 (2024)\nPage 2\nTax and Credits\n16\nTax (see instructions). Check if any from Form(s): 1 :unselected:\n8814 2 :unselected:\n4972\n3 :unselected: . .\n16\n17\nAmount from Schedule 2, line 3 . . . . . . . . . . . .\n. . . . . . . .\n17\n18\nAdd lines 16 and 17 . . . . . . . . . . . . . . . .\n. . . . . . . .\n18\n19\nChild tax credit or credit for other dependents from Schedule 8812 .\n. . . . . . . .\n19\n20\nAmount from Schedule 3, line 8 . . . . . . . . . . . .\n. . . . . . . .\n20\n21\nAdd lines 19 and 20 . . . . . . . . . . . . . . .\n. . . . . . . .\n21\n22\nSubtract line 21 from line 18. If zero or less, enter -0- . . . . . .\n. . . . . . . .\n22\n23\nOther taxes, including self-employment tax, from Schedule 2, line 21 .\n. . . . . . . .\n23\n24\nAdd lines 22 and 23. This is your total tax . . . . . . . . .\n. . . . . . . .\n24\nPayments\n25\nFederal income tax withheld from:\na\nForm(s) W-2 . . . . .\n. . . . . . . . . . . . .\n25a\nb\nForm(s) 1099 . . . . . . . . . . . . . . . . .\n25b\nc\nOther forms (see instructions) . . . . . . . . . . . .\n25c\nd\nAdd lines 25a through 25c . . . . . . . . . . . . .\n. . . . . . . .\n25d\nIf you have a qualifying child, attach Sch. EIC.\n26\n2024 estimated tax payments and amount applied from 2023 return .\n. . . . . . . .\n26\n27\nEarned income credit (EIC) . . . . . . . . . . . . .\n27\n28\nAdditional child tax credit from Schedule 8812 . . . . . . . .\n28\n29\nAmerican opportunity credit from Form 8863, line 8 . . . . . . .\n29\n30\nReserved for future use . . . . . . . . . . . . . .\n30\n31\nAmount from Schedule 3, line 15 . . . . . . . . . . . .\n31\n32\nAdd lines 27, 28, 29, and 31. These are your total other payments and refundable credits . .\n32\n33\nAdd lines 25d, 26, and 32. These are your total payments . . . . . . . . . . . .\n33\nRefund\n34\nIf line 33 is more than line 24, subtract line 24 from line 33. This is the amount you overpaid . .\n34\n35a\nAmount of line 34 you want refunded to you. If Form 8888 is attached, check here :unselected: . . . .\n35a\nDirect deposit? See instructions.\nb\nRouting number\nc Type: :unselected:\nChecking :unselected: Savings\nd\nAccount number\n36\nAmount of line 34 you want applied to your 2025 estimated tax . .\n36\nAmount You Owe\n37\nSubtract line 33 from line 24. This is the amount you owe.\nFor details on how to pay, go to www.irs.gov/Payments or see instructions\n. . . . . . .\n37\n38\nEstimated tax penalty (see instructions) . . . . . . . . . .\n38\nThird Party Designee\nDo you want to allow another person to discuss this return with the IRS? See instructions . . . . . . . . . . . . . . . . . . . .\n. :unselected: Yes. Complete below. :unselected: No\nDesignee's name\nPhone no.\nPersonal identification number (PIN)\nSign Here\nUnder penalties of perjury, I declare that I have examined this return and accompanying schedules and statements, and to the best of my knowledge and belief, they are true, correct, and complete. Declaration of preparer (other than taxpayer) is based on all information of which preparer has any knowledge.\nYour signature\nDate\nYour occupation\nDate\nSpouse's occupation\nIf the IRS sent you an Identity Protection PIN, enter it here (see inst.)\nJoint return? See instructions. Keep a copy for your records.\nSpouse's signature. If a joint return, both must sign.\nPhone no.\nEmail address\nIf the IRS sent your spouse an Identity Protection PIN, enter it here (see inst.)\nPaid Preparer Use Only\nPreparer's name\nPreparer's signature\nDate\nPTIN\nCheck if: :unselected: Self-employed\nFirm's name\nPhone no.\nFirm's address\nFirm's EIN\nGo to www.irs.gov/Form1040 for instructions and the latest information.\nForm 1040 (2024)")
    print(f"AI: {answer}\n")
